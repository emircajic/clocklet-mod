!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t,r){return e=String(e),!t||!isFinite(t)||e.length>=t?e:n(t-e.length,r)+e}function t(e,t,r){return e=String(e),!t||!isFinite(t)||e.length>=t?e:e+n(t-e.length,r)}function n(e,t){for(var n=t=null==t||""===t?" ":String(t);n.length<e;)n+=t;return n.substr(0,e)}function r(){for(var e=0,t=arguments.length;e<t;++e){var n=arguments[e];if("number"==typeof n)return n;if("string"==typeof n){var r=parseFloat(n);if(isFinite(r))return r}}}var i=1e3,o=60*i,a=60*o,u=12*a,l=24*a;function c(){return(Date.now()-(new Date).getTimezoneOffset()*o)%l}function s(e){var t=Math.floor(e)%l;return t>=0?t:t+l}function f(e){return e>=u?e-u:e}function p(e){return e<u?e+u:e}function d(e,t){switch(e=s(e),t&&String(t)[0].toLowerCase()){case"a":return f(e);case"p":return p(e);default:return e}}function h(e){switch(typeof e){case"number":return s(e);case"string":return function(e){if(!(e=e&&String(e).replace(/[\uff00-\uffef]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}).replace(/\s/g,"").replace(/(a|p)\.?m?\.?$/i,function(e,t){return t.toLowerCase()})))return 0;if("now"===e.toLowerCase())return c();var t=e.match(/^([+-]?[0-9]{1,2})(?:([0-9]{2})(?:([0-9]{2})([0-9]*))?)?(a|p)?$/i)||e.match(/^([+-]?[0-9]*\.[0-9]*)()()()(a|p)?$/i)||e.match(/^([+-]?[0-9]*\.?[0-9]*):([+-]?[0-9]*\.?[0-9]*)(?::([+-]?[0-9]*\.?[0-9]*))?()(a|p)?$/i);return t?d((t[1]?parseFloat(t[1])*a:0)+(t[2]?parseFloat(t[2])*o:0)+(t[3]?parseFloat(t[3])*i:0)+(t[4]?1e3*parseFloat("0."+t[4]):0),t[5]):NaN}(e);case"object":if(e)return function(e){if("number"==typeof e.totalMilliseconds)return s(e.totalMilliseconds);var t=r(e.h,e.hour,e.hours,0)*a+r(e.m,e.minute,e.minutes,0)*o+r(e.s,e.second,e.seconds,0)*i+r(e.S,e.millisecond,e.milliseconds,0);if(!0===e.am||!1===e.pm)return f(t);if(!0===e.pm||!1===e.am)return p(t);return d(t,e.a)}(e instanceof Array?{h:e[0],m:e[1],s:e[2],S:e[3]}:e)}return NaN}var m={H:g(0,23),HH:g(0,23,2,"0"),_H:g(0,23,2),h:g(1,12),hh:g(1,12,2,"0"),_h:g(1,12,2),k:g(0,11),kk:g(0,11,2,"0"),_k:g(0,23,2),m:g(0,59),mm:g(0,59,2,"0"),_m:g(0,59,2),s:g(0,59),ss:g(0,59,2,"0"),_s:g(0,59,2),S:g(0,9),SS:g(0,99,2,"0"),SSS:g(0,999,3,"0"),a:function(e){return function(t){return"pm"===e?"am":"pm"}},A:function(e){return function(t){return"PM"===e?"AM":"PM"}},aa:function(e){return function(t){return"p.m."===e?"a.m.":"p.m."}},AA:function(e){return function(t){return"P.M."===e?"A.M.":"P.M."}}};function g(t,n,r,i){return void 0===r&&(r=1),function(o){return function(a,u){var l,c,s,f=(l=parseInt(o,10)+a,c=t,s=n,u?(l=(l-c)%(++s-c))<0?l+s:l+c:l<c?c:l>s?s:l);return isNaN(f)?void 0:e(f,r,i)}}}function b(e,t,n){for(var r=function(e){var t,n=/\\.|HH?|hh?|kk?|mm?|ss?|S{1,3}|AA?|aa?|_H|_h|_k|_m|_s/g,r=[],i=0;for(;t=n.exec(e);){var o=t.index,a=n.lastIndex;i!==o&&r.push({index:i,property:e.slice(i,o),literal:!0}),"\\"===t[0][0]?r.push({index:o,property:t[0].slice(1),literal:!0}):r.push({index:o,property:t[0],literal:!1}),i=a}i<e.length&&r.push({index:i,property:e.slice(i),literal:!0});return r}(e),i=0,o=0,a=0;a<r.length;++a){var u=r[a];if(u.literal){var l=t.indexOf(u.property,i);if(-1===l||l>=n){if(0===a)return;var c=t.slice(o,l);return{property:f=r[a-1].property,index:o,value:c,adjust:m[f](c)}}o=i=l+u.property.length}else"_"===u.property[0]&&" "===t[i]&&++i}var s=r[r.length-1];if(s&&!s.literal){var f;c=t.slice(i);return{property:f=s.property,index:i,value:c,adjust:m[f](c)}}}var v=function(){function n(e){this._totalMilliseconds=e}return Object.defineProperty(n.prototype,"hour",{get:function(){return Math.floor(this._totalMilliseconds/a)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hour12",{get:function(){return(this.hour+11)%12+1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minute",{get:function(){return Math.floor(this._totalMilliseconds%a/o)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"second",{get:function(){return Math.floor(this._totalMilliseconds%o/i)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"millisecond",{get:function(){return this._totalMilliseconds%i},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"am",{get:function(){return this.hour<12},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pm",{get:function(){return this.hour>=12},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hours",{get:function(){return this.hour},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hours12",{get:function(){return this.hour12},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minutes",{get:function(){return this.minute},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"seconds",{get:function(){return this.second},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"milliseconds",{get:function(){return this.millisecond},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"H",{get:function(){return this.invalid?"-":String(this.hour)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"h",{get:function(){return this.invalid?"-":String(this.hour12)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"k",{get:function(){return this.invalid?"-":String((this.hour+23)%24+1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"m",{get:function(){return this.invalid?"-":String(this.minute)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"s",{get:function(){return this.invalid?"-":String(this.second)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"S",{get:function(){return this.invalid?"-":String(Math.floor(this.millisecond/100))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SS",{get:function(){return this.invalid?"--":t(Math.floor(this.millisecond/10),2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"SSS",{get:function(){return this.invalid?"---":t(this.millisecond,3,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"a",{get:function(){return this.invalid?"--":this.am?"am":"pm"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"A",{get:function(){return this.invalid?"--":this.am?"AM":"PM"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"aa",{get:function(){return this.invalid?"----":this.am?"a.m.":"p.m."},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"AA",{get:function(){return this.invalid?"----":this.am?"A.M.":"P.M."},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HH",{get:function(){return this.invalid?"--":e(this.H,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_H",{get:function(){return this.invalid?"--":e(this.H,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hh",{get:function(){return this.invalid?"--":e(this.h,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_h",{get:function(){return this.invalid?"--":e(this.h,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kk",{get:function(){return this.invalid?"--":e(this.k,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_k",{get:function(){return this.invalid?"--":e(this.k,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mm",{get:function(){return this.invalid?"--":e(this.m,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_m",{get:function(){return this.invalid?"--":e(this.m,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ss",{get:function(){return this.invalid?"--":e(this.s,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_s",{get:function(){return this.invalid?"--":e(this.s,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HHmm",{get:function(){return this.HH+":"+this.mm},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HHmmss",{get:function(){return this.HHmm+":"+this.ss},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HHmmssSSS",{get:function(){return this.HHmmss+"."+this.SSS},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalMilliseconds",{get:function(){return this._totalMilliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalSeconds",{get:function(){return Math.floor(this._totalMilliseconds/i)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"totalMinutes",{get:function(){return Math.floor(this._totalMilliseconds/o)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valid",{get:function(){return 0<=this._totalMilliseconds&&this._totalMilliseconds<l},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"invalid",{get:function(){return!this.valid},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"startOfHour",{get:function(){return new n(this._totalMilliseconds-this._totalMilliseconds%a)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"startOfMinute",{get:function(){return new n(this._totalMilliseconds-this._totalMilliseconds%o)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"startOfSecond",{get:function(){return new n(this._totalMilliseconds-this._totalMilliseconds%i)},enumerable:!0,configurable:!0}),n.prototype.ifInvalid=function(e){return this.valid?this:new n(h(e))},n.prototype.startOf=function(e){switch(e){case"hour":return this.startOfHour;case"minute":return this.startOfMinute;case"second":return this.startOfSecond;default:return this}},n.prototype.toString=function(){return this.HHmmssSSS},n.prototype.format=function(e){return t=this,String(e).replace(/\\.|HH?|hh?|kk?|mm?|ss?|S{1,3}|AA?|aa?|_H|_h|_k|_m|_s/g,function(e){return"\\"===e[0]?e[1]:t[e]});var t},n.prototype.with=function(e){return new n(h({h:r(e.h,e.hour,e.hours,this.hour),m:r(e.m,e.minute,e.minutes,this.minute),s:r(e.s,e.second,e.seconds,this.second),S:r(e.S,e.millisecond,e.milliseconds,this.millisecond),am:!0===e.am||!1===e.pm||"am"===e.a||"pm"!==e.a&&void 0}))},n.prototype.plus=function(e){var t=h(e);return 0===t?this:new n(this._totalMilliseconds+t)},n.prototype.minus=function(e){var t=h(e);return 0===t?this:new n(this._totalMilliseconds-t)},n.prototype.equals=function(e){return 0===this.compareTo(e)},n.prototype.compareTo=function(e){return this._totalMilliseconds-h(e)},n.prototype.isBefore=function(e){return this.compareTo(e)<0},n.prototype.isBeforeOrEqual=function(e){return this.compareTo(e)<=0},n.prototype.isAfter=function(e){return this.compareTo(e)>0},n.prototype.isAfterOrEqual=function(e){return this.compareTo(e)>=0},n.prototype.isBetweenExclusive=function(e,t){return this.isAfter(e)&&this.isBefore(t)},n.prototype.isBetweenInclusive=function(e,t){return this.isAfterOrEqual(e)&&this.isBeforeOrEqual(t)},n}(),y=new v(0),O=new v(NaN),_=function(e){if(null==e)return O;if(e instanceof v)return e;var t=h(e);return 0===t?y:isNaN(t)?O:new v(t)};function P(e,t,n){void 0===n&&(n=O);for(var r=n,i=0,o=e.length;i<o;++i){var a=_(e[i]);a.valid&&(r=t(r,a,i,e))}return r}function M(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("input",!0,!1,"complete"),e.dispatchEvent(t)}function k(e){var t=document.createElement("div");return t.className=e,t}_.prototype=v.prototype,_.INVALID=O,_.ZERO=y,_.now=function(){return new v(c())},_.min=function(){return P(arguments,function(e,t){return e.invalid||t.isBefore(e)?t:e})},_.max=function(){return P(arguments,function(e,t){return e.invalid||t.isAfter(e)?t:e})};var S=function(){function e(e,t,n,r){var i=this;this.id=t,this.maxValue=n,this.handLengthSelector=r,this.BLOCK_NAME="clocklet-dial",this.dialElement=k(this.BLOCK_NAME+" clocklet__dial-"+this.id),this.handElement=k(this.BLOCK_NAME+"__hand"),this.tickElements=function(e,t){for(var n=[],r=0;r<e;++r)n.push(t(r));return n}(this.maxValue,function(e){return t=i.BLOCK_NAME,n=e,r=i.maxValue,o=i.handLengthSelector(e),a=Math.PI*(.5-2*n/r),(u=document.createElement("button")).className=t+"__tick",u.dataset.clockletTickValue=n,u.style.left=50+o*Math.cos(a)+"%",u.style.top=50-o*Math.sin(a)+"%",u;var t,n,r,o,a,u});var o=this.dialElement;e.appendChild(o),o.appendChild(this.handElement);for(var a=0,u=this.tickElements;a<u.length;a++){var l=u[a];o.appendChild(l)}}return e.prototype.value=function(e){this.handElement.style.transform="rotate("+360*e/this.maxValue+"deg)";var t=this.BLOCK_NAME+"__tick--selected",n=this.dialElement.getElementsByClassName(t)[0],r=this.dialElement.querySelector("."+this.BLOCK_NAME+'__tick[data-clocklet-tick-value="'+e+'"]');n!==r&&(n&&n.classList.remove(t),r&&r.classList.add(t))},e.prototype.contains=function(e){return this.dialElement.contains(e)},e}();var j,E,H,A,w,L,C,N,x={dataAttributeName:"clocklet"};L=(w=x)&&w.dataAttributeName||"lenientime",C=L+"Complete",N=L+"Format",addEventListener("change",function(e){var t=e.target,n=t.value,r=t.dataset;if(n&&(C in r||L in r)){var i=_(n),o=i.valid?i.format(r[N]||r[L]||"HH:mm"):"";o!==n&&(t.value=o,M(t))}},!0),E=(j=x)&&j.dataAttributeName||"lenientime",H=E+"AdjustOnArrowKeys",A=E+"Format",addEventListener("keydown",function(e){var t=e.which;if(!(38!==t&&40!==t||e.altKey||e.ctrlKey||e.metaKey)){var n=e.target,r=n.dataset;if(H in r||E in r){e.preventDefault();var i,o=r[A]||r[E]||"HH:mm",a=n.value;if(a){if(i=b(o,a,n.selectionStart)){var u=(38===t?1:-1)*(parseFloat(r[H])||1),l=i.adjust(u,!0);if(void 0!==l){var c=i.index;n.value=a.slice(0,c)+l+a.slice(c+i.value.length),n.setSelectionRange(c,c+l.length),M(n)}}}else n.value=_.ZERO.format(o),(i=b(o,n.value,0))&&n.setSelectionRange(i.index,i.index+i.value.length),M(n)}}},!0);var B,T=matchMedia("(hover: none)").matches,F=document.body.appendChild(k("clocklet")),D=F.appendChild(k("clocklet__plate")),I=new S(D,"minute",60,function(e){return e%5?46:39}),K=new S(D,"hour",12,function(e){return 42}),R=D.appendChild(k("clocklet__toggle-am-pm"));D.appendChild(k("clocklet__hands-origin")),addEventListener("focus",function(e){var t=e.target;if("INPUT"===t.tagName&&!t.readOnly&&!t.disabled&&"clocklet"in t.dataset){var n=t.getBoundingClientRect();F.style.left=document.documentElement.scrollLeft+document.body.scrollLeft+n.left+"px",F.style.top=document.documentElement.scrollTop+document.body.scrollTop+n.bottom+"px",F.classList.add("clocklet_shown"),B=t,Z()}},!0),addEventListener("blur",function(e){B&&(B=void 0,F.classList.remove("clocklet_shown"))},!0),addEventListener("input",function(e){return B===e.target&&Z()},!0);var V=F.dataset,q=function(){return delete V.clockletDragging},$=function(e){if(B)if(e instanceof TouchEvent&&e.touches.length>1)delete V.clockletDragging;else{var t=e.target;if(R.contains(t))Y(B,{a:"pm"===R.dataset.clockletAmPm?"am":"pm"});else{var n=t.dataset.clockletTickValue,r=K.contains(t);n&&Y(B,r?{h:n}:{m:n}),V.clockletDragging=r?"hour":"minute"}e.preventDefault()}},X=function(e){var t=V.clockletDragging;if(B&&t){var n=e instanceof TouchEvent?e.targetTouches[0]:e,r=document.elementFromPoint(n.clientX,n.clientY),i=r&&r.dataset,o=i&&i.clockletTickValue;if("hour"===t&&o&&r.classList.contains("clocklet__tick-hour"))Y(B,{h:o});else if("minute"===t&&o&&r.classList.contains("clocklet__tick-minute"))Y(B,{m:o});else{var a=D.getBoundingClientRect(),u=n.clientX-a.left-a.width/2,l=n.clientY-a.top-a.height/2,c=Math.atan2(l,u);Y(B,"hour"===t?{h:Math.round(c/Math.PI*6+15)%12}:{m:Math.round(c/Math.PI*30+75)%60})}e.preventDefault()}};function Y(e,t){void 0===t.a&&(t={h:t.h,m:t.m,a:R.dataset.clockletAmPm}),e.value=_(e.value).with(t).format(e.dataset.clockletFormat||"HH:mm"),T||"text"!==e.type||(void 0!==t.h?e.setSelectionRange(0,2):void 0!==t.m&&e.setSelectionRange(3,5));var n=document.createEvent("CustomEvent");n.initCustomEvent("input",!0,!1,"clocklet"),e.dispatchEvent(n)}function Z(){if(B){F.dataset.value=B.value;var e=_(B.value);K.value(e.hour%12),I.value(e.minute),R.dataset.clockletAmPm=e.a}}F.addEventListener("mousedown",function(e){return e.preventDefault()}),T?(D.addEventListener("touchstart",$),D.addEventListener("touchmove",X),D.addEventListener("touchend",q)):(D.addEventListener("mousedown",$),addEventListener("mousemove",X,!0),addEventListener("mouseup",q,!0))});