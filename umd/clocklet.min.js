!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).clocklet=e()}(this,function(){"use strict";function u(t,e,n){return t=String(t),!e||!isFinite(e)||t.length>=e?t:o(e-t.length,n)+t}function t(t,e,n){return t=String(t),!e||!isFinite(e)||t.length>=e?t:t+o(e-t.length,n)}function o(t,e){for(var n=e=null==e||""===e?" ":String(e);n.length<t;)n+=e;return n.substr(0,t)}function n(){for(var t=0,e=arguments.length;t<e;++t){var n=arguments[t];if("number"==typeof n)return n;if("string"==typeof n){n=parseFloat(n);if(isFinite(n))return n}}}var i=1e3,r=60*i,l=60*r,e=12*l,a=24*l;function c(){return(Date.now()-(new Date).getTimezoneOffset()*r)%a}function s(t){t=Math.floor(t)%a;return 0<=t?t:t+a}function p(t){return e<=t?t-e:t}function d(t){return t<e?t+e:t}function f(t,e){switch(t=s(t),e&&String(e)[0].toLowerCase()){case"a":return p(t);case"p":return d(t);default:return t}}function h(t){switch(typeof t){case"number":return s(t);case"string":return function(t){if(!(t=t&&String(t).replace(/[\uff00-\uffef]/g,function(t){return String.fromCharCode(t.charCodeAt(0)-65248)}).replace(/\s/g,"").replace(/(a|p)\.?m?\.?$/i,function(t,e){return e.toLowerCase()})))return 0;if("now"===t.toLowerCase())return c();t=t.match(/^([+-]?[0-9]{1,2})(?:([0-9]{2})(?:([0-9]{2})([0-9]*))?)?(a|p)?$/i)||t.match(/^([+-]?[0-9]*\.[0-9]*)()()()(a|p)?$/i)||t.match(/^([+-]?[0-9]*\.?[0-9]*):([+-]?[0-9]*\.?[0-9]*)(?::([+-]?[0-9]*\.?[0-9]*))?()(a|p)?$/i);return t?f((t[1]?parseFloat(t[1])*l:0)+(t[2]?parseFloat(t[2])*r:0)+(t[3]?parseFloat(t[3])*i:0)+(t[4]?1e3*parseFloat("0."+t[4]):0),t[5]):NaN}(t);case"object":if(t)return function(t){if("number"==typeof t.totalMilliseconds)return s(t.totalMilliseconds);var e=n(t.h,t.hour,t.hours,0)*l+n(t.m,t.minute,t.minutes,0)*r+n(t.s,t.second,t.seconds,0)*i+n(t.S,t.millisecond,t.milliseconds,0);return!0!==t.am&&!1!==t.pm?!0!==t.pm&&!1!==t.am?f(e,t.a):d(e):p(e)}(t instanceof Array?{h:t[0],m:t[1],s:t[2],S:t[3]}:t)}return NaN}function m(){return/\\.|HH?|hh?|kk?|mm?|ss?|S{1,3}|AA?|aa?|_H|_h|_k|_m|_s/g}var g={H:b(0,23),HH:b(0,23,2,"0"),_H:b(0,23,2),h:b(1,12),hh:b(1,12,2,"0"),_h:b(1,12,2),k:b(0,11),kk:b(0,11,2,"0"),_k:b(0,23,2),m:b(0,59),mm:b(0,59,2,"0"),_m:b(0,59,2),s:b(0,59),ss:b(0,59,2,"0"),_s:b(0,59,2),S:b(0,9),SS:b(0,99,2,"0"),SSS:b(0,999,3,"0"),a:function(e){return function(t){return"pm"===e?"am":"pm"}},A:function(e){return function(t){return"PM"===e?"AM":"PM"}},aa:function(e){return function(t){return"p.m."===e?"a.m.":"p.m."}},AA:function(e){return function(t){return"P.M."===e?"A.M.":"P.M."}}};function b(r,l,a,c){return void 0===a&&(a=1),function(i){return function(t,e){var n,o,n=(n=parseInt(i,10)+t,o=r,t=l,e?(n=(n-o)%(++t-o))<0?n+t:n+o:n<o?o:t<n?t:n);return isNaN(n)?void 0:u(n,a,c)}}}function y(t,e,n){for(var o=v(t),i=0,r=0,l=0;l<o.length;++l){var a=o[l];if(a.literal){var c=e.indexOf(a.property,i);if(-1===c||n<=c){if(0===l)return;var u=e.slice(r,c);return{property:s=o[l-1].property,index:r,value:u,adjust:g[s](u)}}r=i=c+a.property.length}else"_"===a.property[0]&&" "===e[i]&&++i}t=o[o.length-1];if(t&&!t.literal){var s,u=e.slice(i);return{property:s=t.property,index:i,value:u,adjust:g[s](u)}}}function v(t){for(var e,n=m(),o=[],i=0;e=n.exec(t);){var r=e.index,l=n.lastIndex;i!==r&&o.push({index:i,property:t.slice(i,r),literal:!0}),"\\"===e[0][0]?o.push({index:r,property:e[0].slice(1),literal:!0}):o.push({index:r,property:e[0],literal:!1}),i=l}return i<t.length&&o.push({index:i,property:t.slice(i),literal:!0}),o}var k=(Object.defineProperty(O.prototype,"hour",{get:function(){return Math.floor(this._totalMilliseconds/l)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"hour12",{get:function(){return(this.hour+11)%12+1},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"minute",{get:function(){return Math.floor(this._totalMilliseconds%l/r)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"second",{get:function(){return Math.floor(this._totalMilliseconds%r/i)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"millisecond",{get:function(){return this._totalMilliseconds%i},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"am",{get:function(){return this.hour<12},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"pm",{get:function(){return 12<=this.hour},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"hours",{get:function(){return this.hour},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"hours12",{get:function(){return this.hour12},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"minutes",{get:function(){return this.minute},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"seconds",{get:function(){return this.second},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"milliseconds",{get:function(){return this.millisecond},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"H",{get:function(){return this.invalid?"-":String(this.hour)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"h",{get:function(){return this.invalid?"-":String(this.hour12)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"k",{get:function(){return this.invalid?"-":String((this.hour+23)%24+1)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"m",{get:function(){return this.invalid?"-":String(this.minute)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"s",{get:function(){return this.invalid?"-":String(this.second)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"S",{get:function(){return this.invalid?"-":String(Math.floor(this.millisecond/100))},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"SS",{get:function(){return this.invalid?"--":t(Math.floor(this.millisecond/10),2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"SSS",{get:function(){return this.invalid?"---":t(this.millisecond,3,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"a",{get:function(){return this.invalid?"--":this.am?"am":"pm"},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"A",{get:function(){return this.invalid?"--":this.am?"AM":"PM"},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"aa",{get:function(){return this.invalid?"----":this.am?"a.m.":"p.m."},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"AA",{get:function(){return this.invalid?"----":this.am?"A.M.":"P.M."},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"HH",{get:function(){return this.invalid?"--":u(this.H,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"_H",{get:function(){return this.invalid?"--":u(this.H,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"hh",{get:function(){return this.invalid?"--":u(this.h,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"_h",{get:function(){return this.invalid?"--":u(this.h,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"kk",{get:function(){return this.invalid?"--":u(this.k,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"_k",{get:function(){return this.invalid?"--":u(this.k,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"mm",{get:function(){return this.invalid?"--":u(this.m,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"_m",{get:function(){return this.invalid?"--":u(this.m,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"ss",{get:function(){return this.invalid?"--":u(this.s,2,"0")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"_s",{get:function(){return this.invalid?"--":u(this.s,2," ")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"HHmm",{get:function(){return this.HH+":"+this.mm},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"HHmmss",{get:function(){return this.HHmm+":"+this.ss},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"HHmmssSSS",{get:function(){return this.HHmmss+"."+this.SSS},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"totalMilliseconds",{get:function(){return this._totalMilliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"totalSeconds",{get:function(){return Math.floor(this._totalMilliseconds/i)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"totalMinutes",{get:function(){return Math.floor(this._totalMilliseconds/r)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"valid",{get:function(){return 0<=this._totalMilliseconds&&this._totalMilliseconds<a},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"invalid",{get:function(){return!this.valid},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"startOfHour",{get:function(){return new O(this._totalMilliseconds-this._totalMilliseconds%l)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"startOfMinute",{get:function(){return new O(this._totalMilliseconds-this._totalMilliseconds%r)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"startOfSecond",{get:function(){return new O(this._totalMilliseconds-this._totalMilliseconds%i)},enumerable:!0,configurable:!0}),O.prototype.ifInvalid=function(t){return this.valid?this:new O(h(t))},O.prototype.startOf=function(t){switch(t){case"hour":return this.startOfHour;case"minute":return this.startOfMinute;case"second":return this.startOfSecond;default:return this}},O.prototype.toString=function(){return this.HHmmssSSS},O.prototype.format=function(t){return e=this,String(t).replace(m(),function(t){return"\\"===t[0]?t[1]:e[t]});var e},O.prototype.with=function(t){return new O(h({h:n(t.h,t.hour,t.hours,this.hour),m:n(t.m,t.minute,t.minutes,this.minute),s:n(t.s,t.second,t.seconds,this.second),S:n(t.S,t.millisecond,t.milliseconds,this.millisecond),am:!0===t.am||!1===t.pm||"am"===t.a||"pm"!==t.a&&void 0}))},O.prototype.plus=function(t){t=h(t);return 0===t?this:new O(this._totalMilliseconds+t)},O.prototype.minus=function(t){t=h(t);return 0===t?this:new O(this._totalMilliseconds-t)},O.prototype.equals=function(t){return 0===this.compareTo(t)},O.prototype.compareTo=function(t){return this._totalMilliseconds-h(t)},O.prototype.isBefore=function(t){return this.compareTo(t)<0},O.prototype.isBeforeOrEqual=function(t){return this.compareTo(t)<=0},O.prototype.isAfter=function(t){return 0<this.compareTo(t)},O.prototype.isAfterOrEqual=function(t){return 0<=this.compareTo(t)},O.prototype.isBetweenExclusive=function(t,e){return this.isAfter(t)&&this.isBefore(e)},O.prototype.isBetweenInclusive=function(t,e){return this.isAfterOrEqual(t)&&this.isBeforeOrEqual(e)},O);function O(t){this._totalMilliseconds=t}function E(t){return null==t?P:t instanceof k?t:0===(t=h(t))?S:isNaN(t)?P:new k(t)}var S=new k(0),P=new k(NaN);function j(t,e,n){for(var o=n=void 0===n?P:n,i=0,r=t.length;i<r;++i){var l=E(t[i]);l.valid&&(o=e(o,l,i,t))}return o}function _(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("input",!0,!1,"complete"),t.dispatchEvent(e)}E.prototype=k.prototype,E.INVALID=P,E.ZERO=S,E.now=function(){return new k(c())},E.min=function(){return j(arguments,function(t,e){return t.invalid||e.isBefore(t)?e:t})},E.max=function(){return j(arguments,function(t,e){return t.invalid||e.isAfter(t)?e:t})};var w,M,x=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};void 0===window.ontouchend?M=!1:(w=window.ontouchend,M=(window.ontouchend=void 0)!==window.ontouchend,window.ontouchend=w);var H=M;function L(t,e,n,o,i){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,o,i),r.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})},t.dispatchEvent(r),r}function A(t,e){return t.getAttribute("data-clocklet-"+e)}function C(t,e,n){t.setAttribute("data-clocklet-"+e,n)}var T=(N.prototype.value=function(t){this.hand.style.transform="rotate("+360*t/this.maxValue+"deg)";var e="clocklet-tick--selected",n=this.dial.getElementsByClassName(e)[0],t=this.dial.querySelector('[data-clocklet-tick-value="'+t+'"]');n!==t&&(n&&n.classList.remove(e),t&&t.classList.add(e))},N.prototype._onDragStart=function(t){var e;t.touches&&1<t.touches.length?this.dragging=!1:(this.dragging=!0,(e=A(t.target,"tick-value"))&&this.setValue(e),t.preventDefault(),L(this.dial,"clocklet.dragstart",!0,!1))},N.prototype._onDrag=function(t){var e,n,o;this.dragging&&(e=t.targetTouches?t.targetTouches[0]:t,(o=(n=document.elementFromPoint(e.clientX,e.clientY))&&A(n,"tick-value"))&&this.dial.contains(n)?this.setValue(o):(n=this.dial.getBoundingClientRect(),o=e.clientX-n.left-n.width/2,n=e.clientY-n.top-n.height/2,o=Math.atan2(n,o),this.setValue(Math.round(o*this.maxValue/(2*Math.PI)+this.maxValue/4+this.maxValue)%this.maxValue)),t.preventDefault())},N.prototype._onDragEnd=function(t){this.dragging=!1,t.preventDefault(),L(this.dial,"clocklet.dragend",!0,!1)},N);function N(t,e,n){this.dial=t,this.maxValue=e,this.setValue=n,this.hand=this.dial.getElementsByClassName("clocklet-hand")[0],this.dragging=!1,window.PointerEvent?(t.addEventListener("pointerdown",this._onDragStart.bind(this)),addEventListener("pointermove",this._onDrag.bind(this),!0),addEventListener("pointerup",this._onDragEnd.bind(this),!0)):H?(t.addEventListener("touchstart",this._onDragStart.bind(this)),t.addEventListener("touchmove",this._onDrag.bind(this)),t.addEventListener("touchend",this._onDragEnd.bind(this))):(t.addEventListener("mousedown",this._onDragStart.bind(this)),addEventListener("mousemove",this._onDrag.bind(this),!0),addEventListener("mouseup",this._onDragEnd.bind(this),!0))}var D={className:"",format:"HH:mm",placement:"bottom",alignment:"left",appendTo:"body",zIndex:"",dispatchesInputEvents:!0};function I(t){if(t){for(var e={},n=0,o=t.split(";");n<o.length;n++){var i=o[n],r=i.indexOf(":");e[i.slice(0,r).trim().replace(/[a-zA-Z0-9_]-[a-z]/g,function(t){return t[0]+t[2].toUpperCase()})]=i.slice(r+1).trim()}return e}}var B='<div class="clocklet"><div class="clocklet-plate"><div class="clocklet-dial clocklet-dial--minute"><div class="clocklet-hand clocklet-hand--minute"></div><button class="clocklet-tick clocklet-tick--minute" type="button" data-clocklet-tick-value="0" style="left:50%;top:11%"></button><button class="clocklet-tick clocklet-tick--minute" type="button" data-clocklet-tick-value="15" style="left:89%;top:50%"></button><button class="clocklet-tick clocklet-tick--minute" type="button" data-clocklet-tick-value="30" style="left:50%;top:89%"></button><button class="clocklet-tick clocklet-tick--minute" type="button" data-clocklet-tick-value="45" style="left:11%;top:50%"></button></div><div class="clocklet-dial clocklet-dial--hour"><div class="clocklet-hand clocklet-hand--hour"></div><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="0" style="left:50%;top:11%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="1" style="left:69.5%;top:16.2%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="2" style="left:83.8%;top:30.5%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="3" style="left:89%;top:50%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="4" style="left:83.8%;top:69.5%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="5" style="left:69.5%;top:83.8%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="6" style="left:50%;top:89%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="7" style="left:30.5%;top:83.8%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="8" style="left:16.2%;top:69.5%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="9" style="left:11%;top:50%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="10" style="left:16.2%;top:30.5%"></button><button class="clocklet-tick clocklet-tick--hour" type="button" data-clocklet-tick-value="11" style="left:30.5%;top:16.2%"></button></div><div class="clocklet-hand-origin"></div></div></div>';function V(t,e){return z(t,e,/[Hhk]$/)}function z(t,e,n){for(var o=0,i=0,r=v(e);i<r.length;i++){var l=r[i];if(l.literal)o+=l.property.length;else{var a=t[l.property];if(n.test(l.property))return{index:o,value:a};o+=a.length}}}var F=["position","left","top","right","bottom","marginLeft","marginTop","marginRight","marginBottom"],R=matchMedia("(hover: none)").matches;var q=($.prototype.open=function(e,t){var n=this,o=x(Object.create(this.defaultOptions),t),i=e.getBoundingClientRect(),r=getComputedStyle(e),l=this.container,a=this.root,t={options:o};L(e,"clocklet.opening",!0,!0,t).defaultPrevented||(this.input=e,this.dispatchesInputEvents=o.dispatchesInputEvents,C(a,"placement",o.placement),C(a,"alignment",o.alignment),C(a,"format",o.format),C(a,"append-to",o.appendTo),a.className="clocklet clocklet--showing "+(R?"":"clocklet--hoverable ")+o.className,l.style.zIndex=""!==o.zIndex?o.zIndex:(parseInt(r.zIndex,10)||0)+1,"parent"===o.appendTo?e.parentElement.insertBefore(l,e):l.parentElement!==document.body&&document.body.appendChild(l),"top"===o.placement?(a.style.top="",a.style.bottom="0"):(a.style.top=i.height+"px",a.style.bottom=""),"right"===o.alignment?(a.style.left="",a.style.right="-"+i.width+"px"):("center"===o.alignment?a.style.left=(e.offsetWidth-a.offsetWidth)/2+"px":a.style.left="0",a.style.right=""),"fixed"===r.position||"parent"===o.appendTo&&"absolute"===r.position?(this._relocate=void 0,K(l.style,r,F)):(K(l.style,{},F),"parent"===o.appendTo?"flex"===(o=getComputedStyle(e.parentElement)).display||"inline-flex"===o.display?(l.style.position="absolute",this._relocate=function(){l.style.left=e.offsetLeft+"px",l.style.top=e.offsetTop+"px"}):(l.style.position="relative",this._relocate=function(){l.style.left=l.style.top="",l.style.left=e.offsetLeft-l.offsetLeft+"px",l.style.top=e.offsetTop-l.offsetTop+"px"}):(l.style.position="absolute",this._relocate=function(){var t=e.getBoundingClientRect();l.style.left=document.documentElement.scrollLeft+document.body.scrollLeft+t.left+"px",l.style.top=document.documentElement.scrollTop+document.body.scrollTop+t.top+"px"}),this._relocate()),this.updateHighlight(),setTimeout(function(){a.classList.remove("clocklet--showing"),n.input&&a.classList.add("clocklet--shown")}),L(e,"clocklet.opened",!0,!1,t))},$.prototype.close=function(){var t=this.input,e={};t&&(L(t,"clocklet.closing",!0,!0,e).defaultPrevented?t.focus():(this.input=void 0,this.root.classList.remove("clocklet--shown"),L(t,"clocklet.closed",!0,!1,e)))},$.prototype.inline=function(t,e){var n=void 0===e?{}:e,o=n.input,e=n.format,n=new $(this.defaultOptions);return t.appendChild(n.container),n.container.classList.add("clocklet-container--inline"),n.root.classList.add("clocklet--inline"),n.dispatchesInputEvents=n.defaultOptions.dispatchesInputEvents,e=e||n.defaultOptions.format,C(n.root,"format",e),o||((o=t.appendChild(document.createElement("input"))).style.display="none"),o.setAttribute("data-clocklet","format:"+e),o.setAttribute("data-clocklet-inline",""),n.input=o,n.updateHighlight(),n},$.prototype.value=function(t){var e,n,o;this.input&&(e=this.input.value,n="string"==typeof t?E(t):E(this.input.value).with(void 0!==t.a?t:{h:t.h,m:t.m,a:void 0!==t.h?7<=(o=0===(o="string"==typeof t.h?parseInt(t.h):t.h)?12:o)&&o<=12?"am":"pm":E(this.input.value).valid?E(this.input.value).a:"am"}),o=A(this.root,"format"),this.input.value=n.format(o),"text"!==this.input.type||"object"!=typeof t||(o=void 0!==t.h?V(n,o):void 0!==t.m?z(n,o,/m$/):void 0!==t.a?z(n,o,/a/i)||V(n,o):void 0)&&this.input.setSelectionRange(o.index,o.index+o.value.length),this.dispatchesInputEvents&&this.input.value!==e&&L(this.input,"input",!0,!1,{time:n}))},$.prototype.updateHighlight=function(){var t;this.input&&((t=this.input.value?E(this.input.value):E.INVALID).valid?(C(this.root,"value",t.HHmm),this.hour.value(t.hour%12),this.minute.value(t.minute)):(C(this.root,"value",""),this.hour.value(-1),this.minute.value(-1)))},$);function $(t){var e,n=this;this.container=((e=document.createElement("div")).className="clocklet-container",e.innerHTML=B,e),this.root=this.container.firstElementChild,this.plate=this.root.firstElementChild,this.hour=new T(this.plate.getElementsByClassName("clocklet-dial--hour")[0],12,function(t){return n.value({h:t})}),this.minute=new T(this.plate.getElementsByClassName("clocklet-dial--minute")[0],60,function(t){return n.value({m:t})}),this.defaultOptions=x(Object.create(D),t),addEventListener("input",function(t){return t.target===n.input&&n.updateHighlight()},!0),this.root.addEventListener("mousedown",function(t){return t.preventDefault()}),this.root.addEventListener("clocklet.dragstart",function(){return n.root.classList.add("clocklet--dragging")}),this.root.addEventListener("clocklet.dragend",function(){return n.root.classList.remove("clocklet--dragging")});t=function(){return n._relocate&&n._relocate()};addEventListener("resize",t),addEventListener("orientationchange",t)}function K(t,e,n){for(var o=0,i=n;o<i.length;o++){var r=i[o];t[r]=e[r]||""}}var Z,W,X,Y,U,G,J,Q,tt,et,nt,ot={dataAttributeName:"clocklet",formatSelector:function(t){t=I(t.getAttribute("data-clocklet"));return t&&t.format}};return U=(Y=ot)&&Y.dataAttributeName||"lenientime",G=Y&&Y.formatSelector||function(t){return t.dataset.lenientime},addEventListener("change",function(t){var e=t.target,n=e.value,t=e.dataset;n&&U in t&&((t=(t=E(n)).valid?t.format(G(e)||"HH:mm"):"")!==n&&(e.value=t,_(e)))},!0),W=(Z=ot)&&Z.dataAttributeName||"lenientime",X=Z&&Z.formatSelector||function(t){return t.dataset.lenientime},Z&&Z.amountSelector,addEventListener("keydown",function(t){var e,n,o,i,r=t.which;38!==r&&40!==r||t.altKey||t.ctrlKey||t.metaKey||(o=(e=t.target).dataset,W in o&&(t.preventDefault(),n=X(e)||"HH:mm",(o=e.value)?(i=null===(t=e.selectionStart)?void 0:y(n,o,t))&&(t=(38===r?1:-1)*(Z&&Z.amountSelector&&Z.amountSelector(e)||1),void 0!==(r=i.adjust(t,!0))&&(t=i.index,e.value=o.slice(0,t)+r+o.slice(t+i.value.length),e.setSelectionRange(t,t+r.length),_(e))):(e.value=E.ZERO.format(n),(i=y(n,e.value,0))&&e.setSelectionRange(i.index,i.index+i.value.length),_(e))))},!0),tt=new q((J=void 0===J?{}:J).defaultOptions),et=J.target||"input[data-clocklet]:not([data-clocklet-inline])",nt=J.optionsSelector||function(t){return I(t.getAttribute("data-clocklet"))},J=tt.close.bind(tt),et instanceof Element?(et.addEventListener("focus",function(t){return tt.open(t.target,nt(t.target))}),et.addEventListener("blur",J)):(Q="function"==typeof et?et:function(t){return(Element.prototype.matches||Element.prototype.msMatchesSelector).call(t,et)},addEventListener("focusin",function(t){t=t.target;Q(t)&&tt.open(t,nt(t))},!0),addEventListener("focusout",J,!0)),tt});